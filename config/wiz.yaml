# ============================================================
# Wiz Configuration
# ============================================================

# --- Global ---
global:
  coding_agent_bridge_url: "http://127.0.0.1:4003"
  bridge_data_dir: "~/.cin-interface"
  log_level: "info"
  timezone: "America/New_York"
  # machine_id: "macbook-1"  # Uncomment to enable distributed locking across machines

# --- Repositories (processed in order — first gets most time budget) ---
repos:
  - name: "wiz"
    path: "/Users/jason/Documents/wiz"
    github: "sploithunter/wiz"
    enabled: true
    self_improve: true
    allowed_issue_authors:
      - "sploithunter"

  - name: "CIN"
    path: "/Users/jason/Documents/CIN"
    github: "sploithunter/CIN"
    enabled: true
    allowed_issue_authors:
      - "sploithunter"

  - name: "CIN-Interface"
    path: "/Users/jason/Documents/CIN-Interface"
    github: "sploithunter/CIN-Interface"
    enabled: true
    allowed_issue_authors:
      - "sploithunter"

  - name: "coding-agent-bridge"
    path: "/Users/jason/Documents/coding-agent-bridge"
    github: "sploithunter/coding-agent-bridge"
    enabled: true
    allowed_issue_authors:
      - "sploithunter"
      - "jasonjmcghee"

  - name: "meta-harness"
    path: "/Users/jason/Documents/meta-harness"
    github: "sploithunter/meta-harness"
    enabled: true
    allowed_issue_authors:
      - "sploithunter"

  - name: "harness-bench"
    path: "/Users/jason/Documents/harness-bench"
    github: "sploithunter/harnesss-bench"
    enabled: true
    allowed_issue_authors:
      - "sploithunter"

  - name: "solar"
    path: "/Users/jason/Documents/solar"
    github: "sploithunter/solar"
    enabled: true
    allowed_issue_authors:
      - "sploithunter"

# --- Agents ---
agents:
  bug_hunter:
    model: "codex"
    max_issues_per_run: 10
    min_severity: "P4"
    require_poc: true
    audit_docs: true  # Also flag documentation gaps as P4 issues
    session_timeout: 600

  bug_fixer:
    model: "claude"
    max_fixes_per_run: 5
    stagnation_limit: 3
    session_timeout: 600
    flags: ["--chrome"]

  reviewer:
    model: "codex"
    max_reviews_per_run: 10
    max_review_cycles: 3
    session_timeout: 300

  feature_proposer:
    model: "claude"
    features_per_run: 1
    auto_propose_features: true
    require_approval: true
    session_timeout: 6600  # 110 min - Claude can run up to ~40min, Codex ~75min
    flags: ["--chrome"]

  blog_writer:
    model: "claude"
    auto_propose_topics: true
    require_approval: true
    output_dir: "~/Documents/blog-drafts"
    session_timeout: 600
    context_sources:
      session_logs: true         # Pull from Wiz session logs
      github_activity: true      # Pull recent issues/comments from repos
      github_activity_limit: 10  # Max items per repo
      exclude_repos:
        - "genesis"              # Internal project — exclude from public content
    flags: ["--chrome"]

  social_manager:
    model: "claude"
    social_posts_per_week: 3
    platforms:
      - "x"
      - "linkedin"
    require_approval: true
    session_timeout: 300
    typefully_social_set_id: 278996
    flags: ["--chrome"]

# --- Dev Cycle ---
dev_cycle:
  cycle_timeout: 6600  # 110 min - floor for schedule spacing is 2 hours
  phases:
    - "bug_hunt"
    - "bug_fix"
    - "review"
  parallel_fixes: false

# --- Scheduling ---
# Hunt + Review on odd hours (don't conflict — one creates issues, other checks PRs).
# Bug Fix on even hours (runs Claude sessions in worktrees, needs exclusive time).
schedule:
  bug_hunt:
    enabled: true
    times:
      - "01:00"
      - "03:00"
      - "05:00"
      - "07:00"
      - "09:00"
      - "11:00"
      - "13:00"
      - "15:00"
      - "17:00"
      - "19:00"
      - "21:00"
      - "23:00"
    days: ["mon", "tue", "wed", "thu", "fri", "sat", "sun"]

  bug_fix:
    enabled: true
    times:
      - "00:00"
      - "02:00"
      - "04:00"
      - "06:00"
      - "08:00"
      - "10:00"
      - "12:00"
      - "14:00"
      - "16:00"
      - "18:00"
      - "20:00"
      - "22:00"
    days: ["mon", "tue", "wed", "thu", "fri", "sat", "sun"]

  review:
    enabled: true
    times:
      - "01:00"
      - "03:00"
      - "05:00"
      - "07:00"
      - "09:00"
      - "11:00"
      - "13:00"
      - "15:00"
      - "17:00"
      - "19:00"
      - "21:00"
      - "23:00"
    days: ["mon", "tue", "wed", "thu", "fri", "sat", "sun"]

  feature_cycle:
    enabled: true
    times:
      - "09:00"
    days: ["mon", "wed", "fri", "sun"]

  content_cycle:
    enabled: true
    times:
      - "10:00"
    days: ["tue", "thu", "sat"]

# --- Worktrees ---
worktrees:
  base_dir: ".worktrees"
  stale_days: 7
  auto_cleanup_merged: true

# --- File Locking ---
locking:
  ttl: 600
  lock_dir: ".wiz/locks"

# --- Escalation ---
escalation:
  max_issue_strikes: 3
  max_file_strikes: 3
  strike_file: ".wiz/strikes.json"

# --- Memory ---
memory:
  short_term_max_lines: 50
  session_log_retention_days: 30
  long_term_dir: "memory/long-term"

# --- Testing ---
testing:
  run_full_suite_before_pr: true
  require_new_tests_for_fixes: true
  require_new_tests_for_features: true
  no_known_bugs_for_completion: true

# --- Telegram ---
telegram:
  enabled: false
  bot_token: ""
  chat_id: ""

# --- Google Docs ---
google_docs:
  enabled: false
  credentials_file: "~/.wiz/google-credentials.json"
  token_file: "~/.wiz/google-token.json"
  folder_id: ""  # Google Drive folder ID to move docs into
