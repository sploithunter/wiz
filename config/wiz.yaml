# ============================================================
# Wiz Configuration
# ============================================================

# --- Global ---
global:
  coding_agent_bridge_url: "http://127.0.0.1:4003"
  bridge_data_dir: "~/.cin-interface"
  log_level: "info"
  timezone: "America/New_York"
  # machine_id: "macbook-1"  # Uncomment to enable distributed locking across machines

# --- Repositories ---
repos:
  - name: "wiz"
    path: "/Users/jason/Documents/wiz"
    github: "sploithunter/wiz"
    enabled: true
    self_improve: true

  - name: "harness-bench"
    path: "/Users/jason/Documents/harness-bench"
    github: "sploithunter/harnesss-bench"
    enabled: true

  - name: "coding-agent-bridge"
    path: "/Users/jason/Documents/coding-agent-bridge"
    github: "sploithunter/coding-agent-bridge"
    enabled: true

  - name: "solar"
    path: "/Users/jason/Documents/solar"
    github: "sploithunter/solar"
    enabled: true

# --- Agents ---
agents:
  bug_hunter:
    model: "codex"
    max_issues_per_run: 10
    min_severity: "P4"
    require_poc: true
    session_timeout: 600

  bug_fixer:
    model: "claude"
    max_fixes_per_run: 5
    stagnation_limit: 3
    session_timeout: 600
    flags: ["--chrome"]

  reviewer:
    model: "codex"
    max_reviews_per_run: 10
    max_review_cycles: 3
    session_timeout: 300

  feature_proposer:
    model: "claude"
    features_per_run: 1
    auto_propose_features: true
    require_approval: true
    session_timeout: 6600  # 110 min - Claude can run up to ~40min, Codex ~75min
    flags: ["--chrome"]

  blog_writer:
    model: "claude"
    auto_propose_topics: true
    require_approval: true
    output_dir: "~/Documents/blog-drafts"
    session_timeout: 600
    flags: ["--chrome"]

  social_manager:
    model: "claude"
    social_posts_per_week: 3
    platforms:
      - "x"
      - "linkedin"
    require_approval: true
    session_timeout: 300
    typefully_social_set_id: 278996
    flags: ["--chrome"]

# --- Dev Cycle ---
dev_cycle:
  cycle_timeout: 6600  # 110 min - floor for schedule spacing is 2 hours
  phases:
    - "bug_hunt"
    - "bug_fix"
    - "review"
  parallel_fixes: false

# --- Scheduling ---
# Per-phase scheduling (staggered, 2-hour minimum between runs).
# Bug hunt and review (Codex) on odd hours, bug fix (Claude) on even hours.
schedule:
  bug_hunt:
    enabled: true
    times:
      - "07:00"
      - "09:00"
      - "11:00"
      - "13:00"
      - "15:00"
    days: ["mon", "tue", "wed", "thu", "fri"]

  bug_fix:
    enabled: true
    times:
      - "08:00"
      - "10:00"
      - "12:00"
      - "14:00"
      - "16:00"
    days: ["mon", "tue", "wed", "thu", "fri"]

  review:
    enabled: true
    times:
      - "09:00"
      - "11:00"
      - "13:00"
      - "15:00"
      - "17:00"
    days: ["mon", "tue", "wed", "thu", "fri"]

  feature_cycle:
    enabled: true
    times:
      - "09:00"
    days: ["mon", "wed", "fri"]

  content_cycle:
    enabled: true
    times:
      - "10:00"
    days: ["tue", "thu"]

# --- Worktrees ---
worktrees:
  base_dir: ".worktrees"
  stale_days: 7
  auto_cleanup_merged: true

# --- File Locking ---
locking:
  ttl: 600
  lock_dir: ".wiz/locks"

# --- Escalation ---
escalation:
  max_issue_strikes: 3
  max_file_strikes: 3
  strike_file: ".wiz/strikes.json"

# --- Memory ---
memory:
  short_term_max_lines: 50
  session_log_retention_days: 30
  long_term_dir: "memory/long-term"

# --- Testing ---
testing:
  run_full_suite_before_pr: true
  require_new_tests_for_fixes: true
  require_new_tests_for_features: true
  no_known_bugs_for_completion: true

# --- Telegram ---
telegram:
  enabled: false
  bot_token: ""
  chat_id: ""
